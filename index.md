![](images/clean_coders.png)

# Functions

---

# Todays plan

* Remember past session
* Review homework
* Listen/Watch/Discuss about functions
* Shared refactoring session (*Maybe*)

---

# Past session
## Names

* What were the 6 attributes of a good naming?

--

# Names
## Reveal your intent

--

# Names
## Avoid disinformation

--

# Names
## Pronounceable Names

--

# Names
## Avoid encoding

--

# Names
## Parts of speech

--

# Names
## Names length

---

# Homework review

--

* https://github.com/atelierdisko/coupon_code/blob/master/src/CouponCode.php#L150

--

* https://github.com/atelierdisko/coupon_code/blob/master/src/CouponCode.php#L150
* Pronounceable names

--

* https://github.com/OXID-eSales/oxideshop_ce/blob/master/source/Core/Email.php#L53

--

* https://github.com/OXID-eSales/oxideshop_ce/blob/master/source/Core/Email.php#L53
* Avoid encoding

--

* https://github.com/gaparchi/smspilot/blob/master/src/Smspilot.php#L87

--

* https://github.com/gaparchi/smspilot/blob/master/src/Smspilot.php#L87
* Reveal intent

--

* https://github.com/vierbergenlars/xml/blob/0.3.2/XmlCollection.php#L77

--

* https://github.com/vierbergenlars/xml/blob/0.3.2/XmlCollection.php#L77
* Parts of speech

--

* https://github.com/cakephp/cakephp/blob/master/src/Routing/Router.php#L72

--

* https://github.com/cakephp/cakephp/blob/master/src/Routing/Router.php#L72
* Reveal intent

--

* https://github.com/cakephp/cakephp/blob/master/src/Validation/Validation.php#L46

--

* https://github.com/cakephp/cakephp/blob/master/src/Validation/Validation.php#L46
* Avoid disinformation

--

* https://github.com/Webmaxsk/maximages/blob/master/code/ObjectImagesExtension.php#L12

--

* https://github.com/Webmaxsk/maximages/blob/master/code/ObjectImagesExtension.php#L12
* Reveal intent

--

* https://github.com/bastiaanh/overheid-kvk/blob/master/src/Base.php#L43

--

* https://github.com/bastiaanh/overheid-kvk/blob/master/src/Base.php#L43
* Avoid encoding

--

* https://github.com/cakephp/cakephp/blob/master/src/I18n/I18n.php#L28

--

* https://github.com/cakephp/cakephp/blob/master/src/I18n/I18n.php#L28
* Pronounceable names

--

* https://github.com/OXID-eSales/oxideshop_ce/blob/master/source/Application/Controller/BasketController.php#L130

--

* https://github.com/OXID-eSales/oxideshop_ce/blob/master/source/Application/Controller/BasketController.php#L130
* Avoid encoding

--

* https://github.com/cakephp/cakephp/blob/master/src/Controller/Controller.php#L154

--

* https://github.com/cakephp/cakephp/blob/master/src/Controller/Controller.php#L154
* Parts of speech

--

* https://github.com/cakephp/cakephp/blob/master/src/Routing/RouteBuilder.php#L137

--

* https://github.com/cakephp/cakephp/blob/master/src/Routing/RouteBuilder.php#L137
* Avoid disinformation

--

* https://github.com/cakephp/cakephp/blob/master/src/Routing/Router.php#L107

--

* https://github.com/cakephp/cakephp/blob/master/src/Routing/Router.php#L107
* Scope rule

--

* https://github.com/tumblr/laphs/blob/master/dist/laphs.js#L26

--

* https://github.com/tumblr/laphs/blob/master/dist/laphs.js#L26
* Parts of speech

--

* https://github.com/etsy/411/blob/aeb144bfa0d9c2303ac07f6df423de0815a1a22b/phplib/Model.php#L35

--

* https://github.com/etsy/411/blob/aeb144bfa0d9c2303ac07f6df423de0815a1a22b/phplib/Model.php#L35
* Avoid disinformation

--

* https://github.com/etsy/411/blob/aeb144bfa0d9c2303ac07f6df423de0815a1a22b/phplib/Group.php#L51

--

* https://github.com/etsy/411/blob/aeb144bfa0d9c2303ac07f6df423de0815a1a22b/phplib/Group.php#L51
* Pronounceable names 

--

* https://github.com/PHPMailer/PHPMailer/blob/afbe9433d71fc26b8867f48c5ee99bdd0cf0d20a/class.phpmailer.php#L1821

--

* https://github.com/PHPMailer/PHPMailer/blob/afbe9433d71fc26b8867f48c5ee99bdd0cf0d20a/class.phpmailer.php#L1821
* Scope rule

--

* https://github.com/etsy/411/blob/aeb144bfa0d9c2303ac07f6df423de0815a1a22b/phplib/Fun.php#L10

--

* https://github.com/etsy/411/blob/aeb144bfa0d9c2303ac07f6df423de0815a1a22b/phplib/Fun.php#L10
* Reveal intent

--

* https://github.com/guzzle/guzzle/blob/a0d75173c8553b4281c8319333d9ee90e4656ed1/src/Middleware.php#L25

--

* https://github.com/guzzle/guzzle/blob/a0d75173c8553b4281c8319333d9ee90e4656ed1/src/Middleware.php#L25
* Parts of speech

---

# Main topic
## Functions

--

## Functions
### Watch video

`functions-01-overview.mp4`

--

## Functions
### Questions

* What is one thing? [NDB]
* How can we measure if it does only one thing? [NDB]

--

## Functions
### Watch video: Offtopic of the day

`functions-02-what_makes_the_sun_shine.mp4`

*Please watch this on your own time, if you're interested*

--

## Functions
### Watch video

`functions-03-first_rule.mp4`

--

## Functions
### Questions

* What kind of benefits does a small function gives to us? [DB]

--

## Functions
### Double check

* Low amount of indentation
* Low amount of try/catch statements
* Easy to read code
* Understandable and small logic
* Easy to pick a name for function

--

## Functions
### Questions

* Are there any problems with having/using small functions? [NDB]

--

## Functions
### Watch video

`functions-04-out_of_mind.mp4`

--

## Functions
### Questions

* First reaction? [NDB]

--

## Functions
### Questions

* What can we use to help navigate through all the small functions? [DB]

--

## Functions
### Double check

* Choose well thought names for functions/classes/namespaces

--

## Functions
### Questions

* Why having a lot of small functions feels unnatural to us? [DB]

--

## Functions
### Double check

* We’re comfortable to look at large functions which were written by us, and we can recognise the landscape of it.
* https://en.wikipedia.org/wiki/Hindbrain

--

## Functions
### Questions

* What kind of problems can we have with large functions? [DB]

--

## Functions
### Double check

* It’s hard to recognise the landscape for others, as they will be unfamiliar with it.
* It takes time to break down the thoughts behind a big function for everyone which will come into contact with it.

--

## Functions
### Questions

* Why it’s important to organise functions? [DB]

--

## Functions
### Double check

* Because you’ll be working with a team!

--

## Functions
### Questions

* Why we were afraid/discouraged to use a lot of small functions 5-10 years ago? [DB]

--

## Functions
### Double check

* Function call overhead

--

## Functions
### Questions

* Where function call overhead is still a concern? [DB]

--

## Functions
### Double check

* In small/resource limited/embedded systems

--

## Functions
### Questions

* Why it’s important to optimise the code for reading vs focusing on writing it faster? [DB]

--

## Functions
### Double check

* Because of reading/writing ratio, the code will be read more times than it’s written.
* Because by saving yourself a little bit of time you’re wasting everyone else a lot of time.

--

## Functions
### Watch video

`functions-05-classes_hide.mp4`

--

## Functions
### Questions

* Where classes tend to hide? [DB]

--

## Functions
### Double check

* Inside long functions

--

## Functions
### Questions

* How do you start to refactor code? [DB]

--

## Functions
### Double check

* Write characterisation test (golden master)

--

## Functions
### Questions

* Why we need this characterisation test? [DB]

--

## Functions
### Double check

* To see if we haven’t broke our code’s original functionality

--

## Functions
### Watch video

`functions-06-one_thing.mp4`

--

## Functions
### Questions

* What needs to be ensured if we want to have functions to do one thing only? [DB]

--

## Functions
### Double check

* One function shouldn’t manipulate with different level of abstractions

--

## Functions
### Questions

* Examples? [DB]

--

## Functions
### Double check

* Currency converter operation knows how to send e-mail to business clients
* E-mail sender knows how to retrieve products from order

--

## Functions
### Questions

* What is a possible deterministic way to ensure that functions does only one thing and does not cross the different level of abstraction? [WV]

--

## Functions
### Watch video

`functions-07-extract_till_drop.mp4`

--

## Functions
### Questions

* What is a possible deterministic way to ensure that functions does only one thing and does not cross the different level of abstraction? [DB]

--

## Functions
### Double check

* Extract till you drop

--

## Functions
### Questions

* What’s the worst way to test a program? [DB]

--

## Functions
### Double check

* Test it through the UI

--

## Functions
### Questions

* What’s better alternative? [DB]

--

## Functions
### Double check

* Unit/Integration tests

--

## Functions
### Questions

* Why? [DB]

--

## Functions
### Double check

* Faster execution
* Does not depend on the UI

--

## Functions
### Questions

* What’s a feature envy? [DB]

--

## Functions
### Double check

* Provide example with rectangle, getArea

--

## Functions
### Watch video

`functions-08-conclusion.mp4`

--

## Functions
### Things to remember

* Small functions
* Smaller than small functions
* Smaller functions will save you and others time
* Don’t think about function call overhead
* Classes tend to hide in large functions
* Functions do one thing, do it well
* Extract till you drop

---

# Homework

* Finish watching `CleanCode-E3-540p.mp4`
  * Segments:
    * Extract till drop
    * Conclusion
  * Look at the last part of slides
* Watch at least one of the following full-length refactoring video (*this might help with the refactoring on Friday*):
  * `CleanCode-E3-Prime-Generator-540p.mp4`
  * `CleanCode-E3-TestableHtml-540p.mp4`
  * `CleanCode-E3-VideoStore-540p.mp4`